---
# dns role - service management tasks

- name: Enable and start systemd-resolved
  ansible.builtin.systemd_service:
    name: systemd-resolved
    enabled: true
    state: started
  become: true
  when: dns_resolved_enabled | bool
  tags:
    - dns
    - service

- name: Disable systemd-resolved if disabled
  ansible.builtin.systemd_service:
    name: systemd-resolved
    enabled: false
    state: stopped
  become: true
  when: not (dns_resolved_enabled | bool)
  tags:
    - dns
    - service
